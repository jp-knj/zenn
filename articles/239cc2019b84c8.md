---
title: "Rolldownã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ€ãƒ¼ã¨ä¾å­˜ã‚°ãƒ©ãƒ•ã‚’èª­ã¿è§£ãâ€•â€•Rustè£½ãƒãƒ³ãƒ‰ãƒ©ãŒåˆ‡ã‚Šæ‹“ãViteã®æ¬¡ç« "
emoji: "ðŸ¦€"
type: "tech"
topics: ["rolldown", "vite", "rust", "rollup", "javascript"]
published: false
---

# ã¯ã˜ã‚ã«

Viteã§ã®é–‹ç™ºä½“é¨“ã¯å¿«é©ãã®ã‚‚ã®ã§ã™ã€‚ã—ã‹ã—ã€`npm run dev`ã§ã¯å®Œç’§ã«å‹•ã„ã¦ã„ãŸã¯ãšã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã€`npm run build`ã§æœ¬ç•ªç”¨ã«ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã€ãªãœã‹ã‚¹ã‚¿ã‚¤ãƒ«ãŒå´©ã‚ŒãŸã‚Šã€ä¸€éƒ¨ã®æ©Ÿèƒ½ãŒæœŸå¾…é€šã‚Šã«å‹•ã‹ãªããªã£ãŸã‚Šã™ã‚‹â€¦â€¦ã€‚ãã‚“ãªçµŒé¨“ã«ã€ã‚ãªãŸã‚‚ä¸€åº¦ã¯é ­ã‚’æ‚©ã¾ã›ãŸã“ã¨ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ç§ã‚‚ãã®ä¸€äººã§ã—ãŸã€‚é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¨æœ¬ç•ªãƒ“ãƒ«ãƒ‰ã®ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆãŒå¾®å¦™ã«ç•°ãªã‚‹ã“ã¨ã§ã€åŽŸå› ç©¶æ˜Žã«å¤šå¤§ãªæ™‚é–“ã‚’è²»ã‚„ã™ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚ã“ã®å•é¡Œã®æ ¹æºã¯ã€ViteãŒé–‹ç™ºæ™‚ã«ã¯esbuildã‚’ã€æœ¬ç•ªãƒ“ãƒ«ãƒ‰ã«ã¯Rollupã‚’åˆ©ç”¨ã™ã‚‹ã¨ã„ã†ã€ç‰¹æ€§ã®ç•°ãªã‚‹2ã¤ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã„åˆ†ã‘ã¦ã„ã‚‹ç‚¹ã«ã‚ã‚Šã¾ã™ã€‚ã“ã®â€œäºŒåˆ€æµâ€ã“ããŒViteã®é«˜é€Ÿãªé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿç¾ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€åŒæ™‚ã«ã€ãã®å¢ƒç•Œã§æŒ™å‹•ã®ä¸æ•´åˆã¨ã„ã†å‰¯ä½œç”¨ã‚’ç”Ÿã‚“ã§ã„ãŸã®ã§ã™ã€‚ã“ã®ã‚®ãƒ£ãƒƒãƒ—ã‚’åŸ‹ã‚ã‚‹ã¹ãã€ã‚ˆã‚Šä¸€è²«æ€§ã®ã‚ã‚‹ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³ã‚’æ¨¡ç´¢ã—å§‹ã‚ãŸã¨ãã€ç§ã®ç›®ã«é£›ã³è¾¼ã‚“ã§ããŸã®ãŒã€Rustè£½ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ãƒ«ç¾¤ã®å°é ­ã§ã—ãŸã€‚Turbopackã‚„Rspackãªã©ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã¨å …ç‰¢æ€§ã‚’ä¸¡ç«‹ã™ã‚‹Rustè£½ãƒãƒ³ãƒ‰ãƒ©ãŒæ¬¡ã€…ã¨ç™»å ´ã™ã‚‹ä¸­ã§ã€Viteã®æœªæ¥ã¨ã—ã¦æœ¬å‘½è¦–ã•ã‚Œã¦ã„ã‚‹ã®ãŒã€ä»Šå›žã”ç´¹ä»‹ã™ã‚‹ã€ŒRolldownã€ã§ã™ã€‚Viteãƒãƒ¼ãƒ è‡ªã‚‰ãŒé–‹ç™ºã‚’ä¸»å°Žã—ã€Rollupäº’æ›ã®APIã‚’æŒã¡ãªãŒã‚‰ã€å˜ä¸€ã®ã‚¨ãƒ³ã‚¸ãƒ³ã§é–‹ç™ºã¨æœ¬ç•ªã®ä¸¡æ–¹ã‚’æ‹…ã†ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚ã“ã®Rolldownã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’ç†è§£ã™ã‚‹ã“ã¨ã“ãã€ViteãŒè¿Žãˆã‚‹æ¬¡ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã‚’èª­ã¿è§£ãéµã ã¨ç¢ºä¿¡ã—ã€ç­†ã‚’åŸ·ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

---

# Rolldownã®ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ—…ã™ã‚‹

Rolldownã®ä»•äº‹ã¯ã€ä¸€ã¤ã®å¤§ããªæ—…ã®ã‚ˆã†ã«ã€ã„ãã¤ã‹ã®é€£ç¶šã—ãŸãƒ•ã‚§ãƒ¼ã‚ºã‚’çµŒã¦å®Œçµã—ã¾ã™ã€‚æ—…ã®å§‹ã¾ã‚Šã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å…¨ä½“åƒã‚’æŠŠæ¡ã™ã‚‹**ä¾å­˜ã‚°ãƒ©ãƒ•ã®æ§‹ç¯‰**ã§ã™ã€‚ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰å‡ºç™ºã—ã€`import`æ–‡ã‚’é“ã—ã‚‹ã¹ã«ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨ªã­ã€ãã‚Œã‚‰ã®é–¢ä¿‚æ€§ã‚’ä¸€æžšã®åœ°å›³ã«æãå‡ºã—ã¾ã™ã€‚åœ°å›³ãŒå®Œæˆã™ã‚‹ã¨ã€æ—…ã¯æ¬¡ã®ç›®çš„åœ°ã§ã‚ã‚‹**æœ€é©åŒ–**ã¸ã¨é€²ã¿ã¾ã™ã€‚ã“ã“ã§ã¯åœ°å›³ã‚’ç²¾æŸ»ã—ã€ä¸è¦ãªè„‡é“ï¼ˆä½¿ã‚ã‚Œã¦ã„ãªã„ã‚³ãƒ¼ãƒ‰ï¼‰ã‚’æ¶ˆã—ãŸã‚Šã€åŠ¹çŽ‡çš„ãªè¿‘é“ï¼ˆãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ï¼‰ã‚’è¦‹ã¤ã‘ãŸã‚Šã—ã¾ã™ã€‚æ—…ã®ã‚¯ãƒ©ã‚¤ãƒžãƒƒã‚¯ã‚¹ã¯ã€**ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã¨ãƒãƒ³ãƒ‰ãƒ«**ã§ã™ã€‚æœ€é©åŒ–ã•ã‚ŒãŸåœ°å›³ã«åŸºã¥ãã€å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæœ€çµ‚çš„ãªç›®çš„åœ°ï¼ˆESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚„CommonJSãªã©ï¼‰ã«åˆã‚ã›ãŸå½¢å¼ã§ã¾ã¨ã‚ä¸Šã’ã‚‰ã‚Œã¾ã™ã€‚ãã—ã¦æ—…ã®çµ‚ã‚ã‚Šã€**å‡ºåŠ›**ã®æ®µéšŽã§ã€å®Œæˆã—ãŸãƒãƒ³ãƒ‰ãƒ«ãŒé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®ãƒ¡ãƒ¢ãƒªä¸Šã€ã‚ã‚‹ã„ã¯æœ¬ç•ªç”¨ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ‡ã‚£ã‚¹ã‚¯ã«æ›¸ãå‡ºã•ã‚Œã€ç§ãŸã¡ã®æ‰‹å…ƒã«å±Šã‘ã‚‰ã‚Œã‚‹ã®ã§ã™ã€‚

ã“ã®æ—…è·¯ã®ä¸­ã§ã‚‚ã€æœ€åˆã®ã€Œä¾å­˜ã‚°ãƒ©ãƒ•æ§‹ç¯‰ã€ã¯å…¨ä½“ã®åœŸå°ã¨ãªã‚‹æ¥µã‚ã¦é‡è¦ãªã‚¹ãƒ†ãƒƒãƒ—ã§ã™ã€‚ã“ã“ã§æ­£ç¢ºã‹ã¤åŠ¹çŽ‡çš„ãªåœ°å›³ã‚’ä½œã‚Œãªã‘ã‚Œã°ã€ãã®å¾Œã®æœ€é©åŒ–ã‚‚æ­£ã—ãæ©Ÿèƒ½ã—ã¾ã›ã‚“ã€‚

---

# ã™ã¹ã¦ã®å§‹ã¾ã‚Šã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ€ãƒ¼

ä¾å­˜ã‚°ãƒ©ãƒ•ã‚’æ§‹ç¯‰ã™ã‚‹ã¨ã„ã†é‡è¦ãªå½¹å‰²ã‚’æ‹…ã†ã®ãŒã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ€ãƒ¼ã§ã™ã€‚ãã®ä»•äº‹ã¯ã€ã‚ã‚‰ã‚†ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¤ã‘å‡ºã—ã€èª­ã¿è¾¼ã¿ã€RolldownãŒæ‰±ãˆã‚‹å†…éƒ¨æ§‹é€ ã¸ã¨å¤‰æ›ã™ã‚‹ã“ã¨ã«ã‚ã‚Šã¾ã™ã€‚å¯¾è±¡ã¯JavaScriptã‚„TypeScriptã ã‘ã§ãªãã€CSSã‚„ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã§åŠã³ã€ãã‚Œãžã‚Œã®ç¨®é¡žã«å¿œã˜ãŸãƒ‘ãƒ¼ã‚µãƒ¼ã‚„å¤‰æ›å‡¦ç†ãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚

ã“ã®ä¸€é€£ã®å‡¦ç†ã¯ã€`scan`é–¢æ•°ã‹ã‚‰å‘¼ã³å‡ºã•ã‚Œã‚‹`fetch_modules`ã¨ã„ã†é–¢æ•°ã«ã‚ˆã£ã¦å·§ã¿ã«ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãšã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæŒ‡å®šã—ãŸã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã®ãƒ‘ã‚¹ãŒ`ResolvedId`ã¨ã„ã†å†…éƒ¨è¡¨ç¾ã«è§£æ±ºã•ã‚Œã€`try_spawn_new_task`é–¢æ•°ã«æ¸¡ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Tokioã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ä¸Šã§ä¸¦åˆ—å®Ÿè¡Œã•ã‚Œã‚‹éžåŒæœŸã‚¿ã‚¹ã‚¯ãŒç”Ÿæˆã•ã‚Œã‚‹ã®ã§ã™ã€‚å„ã‚¿ã‚¹ã‚¯ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã‚„è§£æžã‚’é€²ã‚ãªãŒã‚‰ã€ãã®é€²æ—ã‚’MPSCãƒãƒ£ãƒãƒ«ã‚’é€šã˜ã¦ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã«å ±å‘Šã—ã¾ã™ã€‚ã€Œæ–°ã—ã„`import`å…ˆã‚’è¦‹ã¤ã‘ãŸã€ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã®è§£æžãŒçµ‚ã‚ã£ãŸã€ã¨ã„ã£ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚‹ãŸã³ã«ã€ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã¯å¿…è¦ã«å¿œã˜ã¦æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’ã‚­ãƒ¥ãƒ¼ã«è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚ã“ã®ä»•çµ„ã¿ã«ã‚ˆã‚Šã€I/Oã§å¾…æ©Ÿã™ã‚‹æ™‚é–“ã¨CPUã§è§£æžã™ã‚‹æ™‚é–“ã‚’æœ€å¤§é™ã«é‡ã­åˆã‚ã›ã€ãƒžãƒ«ãƒã‚³ã‚¢CPUã®æ€§èƒ½ã‚’é™ç•Œã¾ã§å¼•ãå‡ºã™ã®ã§ã™ã€‚ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã€ãƒãƒ£ãƒãƒ«ãŒé–‰ã˜ã‚‰ã‚Œã‚‹ã¨ã€æœ€çµ‚çš„ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é›†åˆã¨ä¾å­˜ã‚°ãƒ©ãƒ•ãŒå®Œæˆã—ã€æ—…ã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸ã¨æ¸¡ã•ã‚Œã¾ã™ã€‚

ã“ã®è¤‡é›‘ãªå‡¦ç†ã‚’åŠ¹çŽ‡çš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã€Rolldownã¯ã„ãã¤ã‹ã®å·§å¦™ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’é§†ä½¿ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯`ModuleIdx`ã¨ã„ã†å˜ç´”ãªæ•°å€¤IDã§åŠ¹çŽ‡çš„ã«ç®¡ç†ã•ã‚Œã€ãã‚Œã‚‰ã‚’æ ¼ç´ã™ã‚‹`HybridIndexVec`ã¯ã€ãƒ“ãƒ«ãƒ‰ã®ç¨®é¡žã«å¿œã˜ã¦å†…éƒ¨å®Ÿè£…ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹æœ€é©åŒ–ãŒæ–½ã•ã‚Œã¦ã„ã¾ã™ã€‚ã¾ãŸã€`ScanStageCache`ã¯ç›´å‰ã®ãƒ“ãƒ«ãƒ‰çµæžœã‚’ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã—ã¦ä¿æŒã—ã€å·®åˆ†ã®ã¿ã‚’å†ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚‹ã“ã¨ã§ã€é–‹ç™ºæ™‚ã®å†ãƒ“ãƒ«ãƒ‰ã‚’åŠ‡çš„ã«é«˜é€ŸåŒ–ã™ã‚‹ã®ã§ã™ã€‚

---

# ä¾å­˜ã‚°ãƒ©ãƒ•ãŒæŒã¤äºŒã¤ã®é¡”

Rolldownã®è¨­è¨ˆã§ç‰¹ã«èˆˆå‘³æ·±ã„ã®ã¯ã€ä¾å­˜ã‚°ãƒ©ãƒ•ã‚’**å‰æ–¹**ã¨**å¾Œæ–¹**ã®äºŒã¤ã®å´é¢ã‹ã‚‰åŒæ™‚ã«ç”Ÿæˆã™ã‚‹ç‚¹ã§ã™ã€‚

å‰æ–¹ã‚°ãƒ©ãƒ•ã¯ã€å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã€Œã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`import`ã—ã¦ã„ã‚‹ã‹ã€ã¨ã„ã†é–¢ä¿‚æ€§ã‚’ã€`ecma_view.import_records`ã®ã‚ˆã†ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ä¿æŒã—ã¾ã™ã€‚ã“ã‚Œã¯ãƒãƒ³ãƒ‰ãƒ«å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚„å®Ÿè¡Œé †åºã‚’æ±ºå®šã™ã‚‹ãŸã‚ã®åŸºæœ¬çš„ãªåœ°å›³ã¨ãªã‚Šã¾ã™ã€‚

ãã®ä¸€æ–¹ã§ã€å¾Œæ–¹ï¼ˆã‚ã‚‹ã„ã¯é€†ï¼‰ã‚°ãƒ©ãƒ•ã¯ã€ã€Œã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€ã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å‚ç…§ã•ã‚Œã¦ã„ã‚‹ã‹ã€ã¨ã„ã†æƒ…å ±ã‚’`importers`ã®ã‚ˆã†ãªãƒ†ãƒ¼ãƒ–ãƒ«ã§ç®¡ç†ã—ã¾ã™ã€‚ã“ã®é€†å¼•ãã®åœ°å›³ã¯ã€ç‰¹å®šã®ã‚³ãƒ¼ãƒ‰ãŒæœ¬å½“ã«å¿…è¦ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã™ã‚‹**ãƒ„ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚­ãƒ³ã‚°**ã‚„ã€ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ™‚ã«å½±éŸ¿ç¯„å›²ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹**HMRï¼ˆãƒ›ãƒƒãƒˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ãƒ¡ãƒ³ãƒˆï¼‰**ã¨ã„ã£ãŸã€é«˜åº¦ãªæœ€é©åŒ–ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ä¸å¯æ¬ ã§ã™ã€‚

---

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã‚’æ”¯ãˆã‚‹Rustã®åŠ›

Rolldownã®é©šç•°çš„ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã¯ã€ãã®è¨­è¨ˆæ€æƒ³ã®æ ¹åº•ã«ã‚ã‚‹äºŒã¤ã®æŸ±ã«ã‚ˆã£ã¦æ”¯ãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ä¸€ã¤ã¯ã€Tokioãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’é§†ä½¿ã—ãŸå¾¹åº•çš„ãª**éžåŒæœŸã§ã®ä¸¦åˆ—å‡¦ç†**ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã„ã£ãŸI/Oã®å¾…ã¡æ™‚é–“ã‚’ã€CPUãŒè¡Œã†è§£æžå‡¦ç†ã®è£ã§é€²è¡Œã•ã›ã€ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’æœ€å¤§åŒ–ã—ã¾ã™ã€‚

ã‚‚ã†ä¸€ã¤ã®æŸ±ã¯ã€**ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ï¼ˆå¢—åˆ†ï¼‰å‡¦ç†**ã®ç©æ¥µçš„ãªæ´»ç”¨ã§ã™ã€‚ç›´å‰ã®ãƒ“ãƒ«ãƒ‰çµæžœã‚’ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ã—ã¦ä¿æŒã—ã€å¤‰æ›´ãŒåŠ ãˆã‚‰ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¨ãã®å½±éŸ¿ç¯„å›²ã ã‘ã‚’å†è¨ˆç®—ã™ã‚‹ã“ã¨ã§ã€é–‹ç™ºæ™‚ã®å†ãƒ“ãƒ«ãƒ‰ä½“é¨“ã‚’åŠ‡çš„ã«å‘ä¸Šã•ã›ã¦ã„ã‚‹ã®ã§ã™ã€‚

ã“ã‚Œã‚‰ã®é«˜åº¦ãªæœ€é©åŒ–ãŒã€å®Ÿè¡Œæ™‚ã®è¿½åŠ ã‚³ã‚¹ãƒˆã‚’ã»ã¨ã‚“ã©ç”Ÿã‚€ã“ã¨ãªãå®Ÿç¾ã§ãã¦ã„ã‚‹ã®ã¯ã€ã¾ã•ã«Rustè¨€èªžãŒæŒã¤ã‚¼ãƒ­ã‚³ã‚¹ãƒˆæŠ½è±¡åŒ–ã¨æ‰€æœ‰æ¨©ãƒ¢ãƒ‡ãƒ«ã®è³œç‰©ã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚

---

# Viteçµ±åˆãŒã‚‚ãŸã‚‰ã™æœªæ¥

ç¾åœ¨ã‚‚æ´»ç™ºã«é–‹ç™ºãŒé€²ã‚€Rolldownã§ã™ãŒã€ãã®æœ€çµ‚ç›®æ¨™ã®ä¸€ã¤ã¯Viteã¸ã®å®Œå…¨çµ±åˆã§ã™ã€‚ViteãŒæ­£å¼ã«Rolldownã¸ã¨ã‚¹ã‚¤ãƒƒãƒã—ãŸæšã«ã¯ã€ç§ãŸã¡ã®é–‹ç™ºä½“é¨“ã¯å¤§ããå¤‰ã‚ã‚‹ã§ã—ã‚‡ã†ã€‚

ã¾ãšã€é•·å¹´ã®èª²é¡Œã§ã‚ã£ãŸ**é–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒã®ãƒ“ãƒ«ãƒ‰çµæžœã®å·®ç•°ãŒå®Œå…¨ã«è§£æ¶ˆ**ã•ã‚Œã¾ã™ã€‚ã¾ãŸã€Node.jsã®ã‚·ãƒ³ã‚°ãƒ«ã‚¹ãƒ¬ãƒƒãƒ‰ã¨ã„ã†åˆ¶ç´„ã‹ã‚‰è§£æ”¾ã•ã‚Œã‚‹ã“ã¨ã§ã€CI/CDã«ãŠã‘ã‚‹ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®å¤§å¹…ãªçŸ­ç¸®ã‚‚æœŸå¾…ã§ãã¾ã™ã€‚ãã—ã¦ã€ã“ã®ç§»è¡Œã¯**Rustãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã„ã†æ–°ãŸãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®é–‹èŠ±**ã‚’ä¿ƒã™ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

æ—¢å­˜ã®Viteãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é–‹ç™ºã—ã¦ã„ã‚‹æ–¹ã€…ã¯ã€ä»Šã®ã†ã¡ã‹ã‚‰esbuildã‚„Rollupã®ç‰¹å®šæ©Ÿèƒ½ã«éŽåº¦ã«ä¾å­˜ã—ãªã„ã€ã‚ˆã‚Šãƒãƒ¼ã‚¿ãƒ–ãƒ«ãªå®Ÿè£…ã‚’æ„è­˜ã—ã¦ãŠãã“ã¨ã§ã€ã“ã®å¤§ããªå¤‰åŒ–ã®æ³¢ã«ã‚¹ãƒ ãƒ¼ã‚ºã«ä¹—ã‚‹ã“ã¨ãŒã§ãã‚‹ã¯ãšã§ã™ã€‚

---

# ã¾ã¨ã‚

Rolldownã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ€ãƒ¼ã¯ã€Tokioã«ã‚ˆã‚‹éžåŒæœŸå®Ÿè¡Œã¨ã€Rustã®ç‰¹æ€§ã‚’æ´»ã‹ã—ãŸå·§å¦™ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã€Œä¾å­˜ã‚°ãƒ©ãƒ•ã®æ§‹ç¯‰ã€ã¨ã„ã†ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã§æœ€ã‚‚é‡è¦ãªã‚¿ã‚¹ã‚¯ã‚’ã€ç¾ä»£ã®ãƒžãƒ«ãƒã‚³ã‚¢CPUæ™‚ä»£ã«ãµã•ã‚ã—ã„å½¢ã§è§£æ±ºã—ã¦ã„ã¾ã™ã€‚

ViteãŒRolldownã«ä¸€æœ¬åŒ–ã•ã‚Œã‚Œã°ã€ã€Œé–‹ç™ºã§ã¯å‹•ã„ãŸã®ã«ã€æœ¬ç•ªã§ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‰å£Šã‚ŒãŸã€ã¨ã„ã†ã€å¤šãã®é–‹ç™ºè€…ãŒçµŒé¨“ã—ã¦ããŸæ—¥å¸¸çš„ãªãƒ•ãƒ©ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰è§£æ”¾ã•ã‚Œã¾ã™ã€‚ãã—ã¦ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ€§èƒ½ã‚‚å¤§ããåº•ä¸Šã’ã•ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚Rustè£½ãƒ„ãƒ¼ãƒ«ãƒã‚§ãƒ¼ãƒ³ãŒã‚‚ãŸã‚‰ã™ã“ã®å¤§ããªæ³¢ã«å‚™ãˆã€ä»Šã®ã†ã¡ã«ãã®å†…éƒ¨æ§‹é€ ã‚’è¦—ã„ã¦ãŠãã“ã¨ã«ã¯ã€è¨ˆã‚ŠçŸ¥ã‚Œãªã„ä¾¡å€¤ãŒã‚ã‚‹ã¯ãšã§ã™ã€‚

---

> **å‚è€ƒ**
> *Original article: â€œHow Rolldown Works: Module Loading, Dependency Graphs, and Optimization Explainedâ€ by Atriiy.dev*
> 2025-04-12 å…¬é–‹ã€‚å…¨æ–‡ã¯ä»¥ä¸‹ã‹ã‚‰é–²è¦§ã§ãã¾ã™ã€‚
> https://www.atriiy.dev/blog/rolldown-module-loader-and-dependency-graph