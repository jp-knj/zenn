---
title: "node.js ã§ãƒ‘ã‚¹ã¨ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã™ã‚‹æ–¹æ³•"
emoji: "ğŸ“‘"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Node.js"]
published: false
---
## ã¯ã˜ã‚ã«
pathãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ©ç”¨ã—ãŸãƒ‘ã‚¹æ“ä½œæ–¹æ³•ã«ã¤ã„ã¦å‹•ä½œç¢ºèªã—ãŸãƒ¡ãƒ¢ã‚’æ®‹ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚

## pathãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‹•ä½œç¢ºèªã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
  â–¾ Hoge/
    â–¾ foo.js/
        a.js
      â–¾ b/
          b.js
      â–¾ c/
          c.js
```

## ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹
```:Hoge/foo.js/a.js
console.log(process.argv[1], "a.js", "cwd", process.cwd());
console.log(process.argv[1], "a.js", "__dirname", __dirname);
console.log(process.argv[1], "a.js", "path.resolve", require("path").resolve(""));
```

## å®Ÿè¡Œçµæœ
```
~/Hoge/foo.js/a.js   a.js   cwd            ~/Hoge/foo.js
~/Hoge/foo.js/a.js   a.js   __dirname      ~/Hoge/foo.js
~/Hoge/foo.js/a.js   a.js   path.resolve   ~/Hoge/foo.js
```

## ã‚³ãƒ¼ãƒ‰ã®è§£èª¬
- `process.argv[1]` ã‹ã‚‰ã€node ã‚³ãƒãƒ³ãƒ‰ã«æŒ‡å®šã•ã‚ŒãŸ a.js ã®ãƒ‘ã‚¹( `~/Hoge/foo.js/a.js` )ã‚’å–å¾—ã§ãã¾ã™
- `process.cwd()` ã‹ã‚‰ã€node ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹( `~/Hoge/foo.js` )ã‚’å–å¾—ã§ãã¾ã™ã€‚
`process.cwd()` ã¯ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® çµ¶å¯¾ãƒ‘ã‚¹ ã‚’è¿”ã—ã¾ã™ã€‚
- `__dirname` ã«ã¯ã€`ç¾åœ¨å®Ÿè¡Œä¸­`ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹`ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚
ä¾‹ãˆã°ã€
`~/Hoge/foo.js/a.js` ä¸Šã§ `__dirname` ã‚’å–å¾—ã™ã‚‹ã¨ `~/Hoge/foo.js` ã«ãªã‚Šã¾ã™
`~/Hoge/foo.js/b/b.js` ä¸Šã§ `__dirname` ã‚’å–å¾—ã™ã‚‹ã¨ `~/Hoge/foo.js/b` ã«ãªã‚Šã¾ã™
`~/Hoge/foo.js/c/c.js` ä¸Šã§ `__dirname` ã‚’å–å¾—ã™ã‚‹ã¨ `~/Hoge/foo.js/c` ã«ãªã‚Šã¾ã™
ã¾ãŸã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰(a.js, b.js, c.js)ã‚’çµåˆã—ã€1ãƒ•ã‚¡ã‚¤ãƒ«åŒ–(a.js)ã—ãŸå ´åˆã¯ã€ `__dirname` ã®å€¤ã¯ã¾ãŸç•°ãªã‚‹ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚
ä»Šå›ã‚³ãƒ¼ãƒ‰ã«ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€`__filename`ã«ã¯ã€`ç¾åœ¨å®Ÿè¡Œä¸­`ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹`çµ¶å¯¾ãƒ‘ã‚¹`ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚
- `require("path").resolve("")` ã§ cwd ã‚’åŸºæº–ã¨ã—ãŸçµ¶å¯¾ãƒ‘ã‚¹ã‚’å–å¾—ã§ãã¾ã™ã€‚

## b.jsä¸Š ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹
```:Home/foo.js/b/b.js
console.log(process.argv[1], "b.js", "cwd", process.cwd());
console.log(process.argv[1], "b.js", "__dirname", __dirname);
console.log(process.argv[1], "b.js", "path.resolve", require("path").resolve(""));
```

## b.jsä¸Š ã®å®Ÿè¡Œçµæœ
```
~/Hoge/foo.js/a.js   b.js   cwd            ~/Hoge/foo.js
~/Hoge/foo.js/a.js   b.js   __dirname      ~/Hoge/foo.js/b
~/Hoge/foo.js/a.js   b.js   path.resolve   ~/Hoge/foo.js
```

## c.jsä¸Š ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹
```:Home/foo.js/c/c.js
console.log(process.argv[1], "c.js", "cwd", process.cwd());
console.log(process.argv[1], "c.js", "__dirname", __dirname);
console.log(process.argv[1], "c.js", "path.resolve", require("path").resolve(""));
```
## c.jsä¸Š ã®å®Ÿè¡Œçµæœ
```
~/hoge/Foo.js/a.js   c.js   cwd            ~/hoge/Foo.js
~/hoge/Foo.js/a.js   c.js   __dirname      ~/hoge/Foo.js/c
~/hoge/Foo.js/a.js   c.js   path.resolve   ~/hoge/Foo.js
```

## å‚è€ƒ
https://gist.github.com/uupaa/da42698d6b2d2cbb3cca
